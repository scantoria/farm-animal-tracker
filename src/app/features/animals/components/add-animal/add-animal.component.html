<div class="page-container">

  <!-- Header Section -->
  <div class="form-header">
    <div class="header-content">
      <button type="button" class="btn-back" routerLink="/">
        <i class="bi bi-arrow-left"></i>
      </button>
      <div class="header-text">
        <h1>Add New Animal</h1>
        <p class="subtitle">Register a new animal in the system</p>
      </div>
    </div>
  </div>

  <!-- Form Card -->
  <div class="form-card">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)">

      <!-- Form Grid -->
      <div class="form-grid">

        <!-- Name Field -->
        <div class="form-group">
          <label for="name" class="form-label">
            Animal Name or Tag <span class="required">*</span>
          </label>
          <input
            type="text"
            id="name"
            name="name"
            ngModel
            required
            #name="ngModel"
            class="form-control"
            placeholder="Enter animal name or tag number"
            [class.is-invalid]="name.invalid && name.touched"
          />
          <div class="invalid-feedback" *ngIf="name.invalid && name.touched">
            <div *ngIf="name.errors?.['required']">
              Name or tag is required.
            </div>
          </div>
        </div>

        <!-- Species Field -->
        <div class="form-group">
          <label for="species" class="form-label">
            Species <span class="required">*</span>
          </label>
          <input
            type="text"
            id="species"
            name="species"
            ngModel
            required
            #species="ngModel"
            class="form-control"
            placeholder="e.g., Cattle, Pig, Goat"
            [class.is-invalid]="species.invalid && species.touched"
          />
          <div class="invalid-feedback" *ngIf="species.invalid && species.touched">
            <div *ngIf="species.errors?.['required']">
              Species is required.
            </div>
          </div>
        </div>

        <!-- Breed Field -->
        <div class="form-group">
          <label for="breed" class="form-label">
            Breed <span class="required">*</span>
          </label>
          <input
            type="text"
            id="breed"
            name="breed"
            ngModel
            required
            #breed="ngModel"
            class="form-control"
            placeholder="Enter breed"
            [class.is-invalid]="breed.invalid && breed.touched"
          />
          <div class="invalid-feedback" *ngIf="breed.invalid && breed.touched">
            <div *ngIf="breed.errors?.['required']">
              Breed is required.
            </div>
          </div>
        </div>

        <!-- Date of Birth Field -->
        <div class="form-group">
          <label for="dob" class="form-label">
            Date of Birth <span class="required">*</span>
          </label>
          <input
            type="date"
            id="dob"
            name="dob"
            ngModel
            required
            #dob="ngModel"
            class="form-control"
            [class.is-invalid]="dob.invalid && dob.touched"
          />
          <div class="invalid-feedback" *ngIf="dob.invalid && dob.touched">
            <div *ngIf="dob.errors?.['required']">
              Date of birth is required.
            </div>
          </div>
        </div>

        <!-- Sex Field -->
        <div class="form-group">
          <label for="sex" class="form-label">
            Sex <span class="required">*</span>
          </label>
          <select
            id="sex"
            name="sex"
            ngModel
            required
            #sex="ngModel"
            class="form-control"
            [class.is-invalid]="sex.invalid && sex.touched"
            (change)="onSexChange($event)"
          >
            <option value="" disabled selected>Select sex...</option>
            <option value="female">Female</option>
            <option value="male">Male</option>
          </select>
          <div class="invalid-feedback" *ngIf="sex.invalid && sex.touched">
            <div *ngIf="sex.errors?.['required']">
              Sex is required.
            </div>
          </div>
        </div>

        <!-- Reproductive Status Field -->
        <div class="form-group">
          <label for="reproductiveStatus" class="form-label">
            Reproductive Status
          </label>
          <select
            id="reproductiveStatus"
            name="reproductiveStatus"
            ngModel
            class="form-control"
          >
            <option value="" disabled selected>Select reproductive status...</option>
            <option value="unknown">Unknown</option>
            <option *ngFor="let option of reproductiveStatusOptions" [value]="option.value">
              {{ option.label }}
            </option>
          </select>
        </div>

        <!-- Status Field -->
        <div class="form-group">
          <label for="status" class="form-label">
            Status <span class="required">*</span>
          </label>
          <select
            id="status"
            name="status"
            ngModel
            required
            #status="ngModel"
            class="form-control"
            [class.is-invalid]="status.invalid && status.touched"
          >
            <option value="" disabled selected>Select status...</option>
            <option value="active">Active</option>
            <option value="sold">Sold</option>
            <option value="deceased">Deceased</option>
          </select>
          <div class="invalid-feedback" *ngIf="status.invalid && status.touched">
            <div *ngIf="status.errors?.['required']">
              Status is required.
            </div>
          </div>
        </div>

      </div>

      <!-- Bloodline Section -->
      <div class="form-section-header">
        <h3>Bloodline / Parentage</h3>
      </div>

      <div class="form-grid">
        <!-- Sire (Father) Field -->
        <div class="form-group">
          <label for="sireId" class="form-label">
            Sire (Father)
          </label>
          <select
            id="sireId"
            name="sireId"
            ngModel
            class="form-control"
          >
            <option value="">Unknown / Not in system</option>
            <option *ngFor="let sire of potentialSires" [value]="sire.id">
              {{ sire.name }} ({{ sire.breed }})
            </option>
          </select>
        </div>

        <!-- Dam (Mother) Field -->
        <div class="form-group">
          <label for="damId" class="form-label">
            Dam (Mother)
          </label>
          <select
            id="damId"
            name="damId"
            ngModel
            class="form-control"
          >
            <option value="">Unknown / Not in system</option>
            <option *ngFor="let dam of potentialDams" [value]="dam.id">
              {{ dam.name }} ({{ dam.breed }})
            </option>
          </select>
        </div>
      </div>

      <!-- Current Farm Location Section -->
      <div class="form-section-header">
        <h3>Current Farm Location</h3>
      </div>

      <div class="form-grid">
        <!-- Farm Assignment Field -->
        <div class="form-group">
          <label for="currentFarmId" class="form-label">
            Assign to Farm (Optional)
          </label>
          <select
            id="currentFarmId"
            name="currentFarmId"
            ngModel
            class="form-control"
          >
            <option value="">None</option>
            <option *ngFor="let farm of farms" [value]="farm.id">{{ farm.name }}</option>
          </select>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" routerLink="/">
          <i class="bi bi-x-circle me-1"></i> Cancel
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
          <i class="bi bi-check-circle me-1"></i> Add Animal
        </button>
      </div>

    </form>
  </div>

</div>