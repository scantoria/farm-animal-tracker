<div class="page-container">
  
  <!-- Header Section -->
  <div class="form-header">
    <div class="header-content">
      <button type="button" class="btn-back" (click)="onCancel()">
        <i class="bi bi-arrow-left"></i>
      </button>
      <div class="header-text">
        <h1>Edit Birth Record</h1>
        <p class="record-id">Record ID: {{ recordId }}</p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="!birthingRecord" class="loading-state">
    <div class="spinner"></div>
    <p>Loading record data...</p>
  </div>

  <!-- Form Card -->
  <div *ngIf="birthingRecord" class="form-card">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)" class="birth-form">
      
      <!-- Form Grid - Two columns on larger screens -->
      <div class="form-grid">
        
        <!-- Species -->
        <div class="form-group">
          <label for="species" class="form-label">
            Species <span class="required">*</span>
          </label>
          <select 
            class="form-control" 
            id="species" 
            name="species" 
            [(ngModel)]="birthingRecord.species" 
            required
            #speciesField="ngModel"
          >
            <option value="" disabled>Select species</option>
            <option *ngFor="let species of speciesOptions" [value]="species">{{ species }}</option>
          </select>
          <div class="form-error" *ngIf="speciesField.invalid && speciesField.touched">
            Species is required
          </div>
        </div>

        <!-- Date of Birth -->
        <div class="form-group">
          <label for="dob" class="form-label">
            Date of Birth <span class="required">*</span>
          </label>
          <input 
            type="date" 
            class="form-control" 
            id="dob" 
            name="dob" 
            [(ngModel)]="birthingRecord.dob" 
            required
            #dobField="ngModel"
          >
          <div class="form-error" *ngIf="dobField.invalid && dobField.touched">
            Date of birth is required
          </div>
        </div>

        <!-- Offspring Tag/ID -->
        <div class="form-group">
          <label for="tagInfo" class="form-label">
            Offspring Tag/ID <span class="required">*</span>
          </label>
          <input 
            type="text" 
            class="form-control" 
            id="tagInfo" 
            name="tagInfo" 
            [(ngModel)]="birthingRecord.tagInfo" 
            placeholder="Enter tag or ID number"
            required
            #tagField="ngModel"
          >
          <div class="form-error" *ngIf="tagField.invalid && tagField.touched">
            Tag/ID is required
          </div>
        </div>

        <!-- Sex -->
        <div class="form-group">
          <label for="sex" class="form-label">
            Sex <span class="required">*</span>
          </label>
          <select 
            class="form-control" 
            id="sex" 
            name="sex" 
            [(ngModel)]="birthingRecord.sex" 
            required
            #sexField="ngModel"
          >
            <option value="" disabled>Select sex</option>
            <option *ngFor="let sex of sexOptions" [value]="sex">{{ sex | titlecase }}</option>
          </select>
          <div class="form-error" *ngIf="sexField.invalid && sexField.touched">
            Sex is required
          </div>
        </div>

        <!-- Sire ID -->
        <div class="form-group">
          <label for="sire" class="form-label">
            Sire ID <span class="optional">(Optional)</span>
          </label>
          <input
            type="text"
            class="form-control"
            id="sire"
            name="sire"
            [(ngModel)]="birthingRecord.sire"
            placeholder="Enter sire identification"
          >
          <small class="form-help">Leave blank if unknown</small>
        </div>

        <!-- Birth Weight -->
        <div class="form-group">
          <label for="birthWeight" class="form-label">
            Birth Weight <span class="optional">(Optional)</span>
          </label>
          <input
            type="text"
            class="form-control"
            id="birthWeight"
            name="birthWeight"
            [(ngModel)]="birthingRecord.birthWeight"
            placeholder="e.g., 85 lbs or 38.5 kg"
          >
          <small class="form-help">Include units (lbs, kg, etc.)</small>
        </div>

        <!-- Offspring Breed -->
        <div class="form-group">
          <label for="breed" class="form-label">
            Offspring Breed <span class="required">*</span>
          </label>
          <input 
            type="text" 
            class="form-control" 
            id="breed" 
            name="breed" 
            [(ngModel)]="birthingRecord.breed" 
            placeholder="Enter breed"
            required
            #breedField="ngModel"
          >
          <div class="form-error" *ngIf="breedField.invalid && breedField.touched">
            Breed is required
          </div>
        </div>

        <!-- Calving Ease -->
        <div class="form-group">
          <label for="calvingEase" class="form-label">
            Calving Ease <span class="optional">(Optional)</span>
          </label>
          <select
            class="form-control"
            id="calvingEase"
            name="calvingEase"
            [(ngModel)]="birthingRecord.calvingEase"
          >
            <option value="">Select calving ease</option>
            <option *ngFor="let ease of calvingEaseOptions" [value]="ease">{{ ease }}</option>
          </select>
        </div>

        <!-- Notes - Full Width -->
        <div class="form-group form-group-full">
          <label for="notes" class="form-label">
            Notes <span class="optional">(Optional)</span>
          </label>
          <textarea 
            class="form-control" 
            id="notes" 
            name="notes" 
            rows="4" 
            [(ngModel)]="birthingRecord.notes"
            placeholder="Add any additional notes about the birth..."
          ></textarea>
          <small class="form-help">Any complications, observations, or special care notes</small>
        </div>

      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onCancel()"
        >
          <i class="bi bi-x-circle"></i>
          <span>Cancel</span>
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="form.invalid || isSubmitting"
        >
          <i class="bi bi-save" *ngIf="!isSubmitting"></i>
          <span class="spinner-border spinner-border-sm" *ngIf="isSubmitting"></span>
          <span>{{ isSubmitting ? 'Updating...' : 'Update Record' }}</span>
        </button>
      </div>

      <!-- Form Validation Summary -->
      <div class="validation-summary" *ngIf="form.invalid && form.submitted">
        <i class="bi bi-exclamation-triangle"></i>
        <span>Please fill in all required fields before submitting.</span>
      </div>

    </form>
  </div>

</div>