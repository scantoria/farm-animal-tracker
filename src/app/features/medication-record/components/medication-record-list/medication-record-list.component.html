<div class="page-container">

  <!-- Header Section -->
  <div class="header-bar">
    <div class="header-content">
      <button type="button" class="btn-back" (click)="onBackToAnimal()">
        <i class="bi bi-arrow-left"></i>
      </button>
      <div class="header-text">
        <h1>Medication Records</h1>
        <p class="animal-id">Animal ID: {{ animalId }}</p>
      </div>
    </div>
    <button type="button" class="btn-add" (click)="onAddRecord()">
      <i class="bi bi-plus-circle"></i>
      <span class="btn-text">Add Record</span>
    </button>
  </div>

  <!-- Records List -->
  <div class="records-container" *ngIf="medicationRecords$ | async as records">

    <!-- Desktop Header (hidden on mobile) -->
    <div class="list-header d-none d-lg-grid">
      <div class="header-col">Visit Date</div>
      <div class="header-col">Treatment Type</div>
      <div class="header-col">Medication</div>
      <div class="header-col">Dosage</div>
      <div class="header-col">Provider</div>
      <div class="header-col">Actions</div>
    </div>

    <!-- Records List -->
    <div class="records-list" *ngIf="records.length > 0">
      <div class="record-row" *ngFor="let record of records; trackBy: trackByRecordId">

        <!-- Visit Date Column -->
        <div class="record-data date-col">
          <span class="mobile-label">Visit Date:</span>
          <span class="date-value">{{ record.visitDate }}</span>
        </div>

        <!-- Treatment Type Column -->
        <div class="record-data type-col">
          <span class="mobile-label">Treatment Type:</span>
          <span class="type-value">{{ record.treatmentType }}</span>
        </div>

        <!-- Medication Column -->
        <div class="record-data med-col">
          <span class="mobile-label">Medication:</span>
          <span class="med-text">{{ record.medicationName || 'N/A' }}</span>
        </div>

        <!-- Dosage Column -->
        <div class="record-data dose-col">
          <span class="mobile-label">Dosage:</span>
          <span class="dose-text">{{ record.dosage || 'N/A' }}</span>
        </div>

        <!-- Provider Column -->
        <div class="record-data provider-col">
          <span class="mobile-label">Provider:</span>
          <span class="provider-text">{{ record.provider }}</span>
        </div>

        <!-- Actions Column -->
        <div class="record-actions">
          <button type="button" class="btn-action btn-edit" (click)="onEdit(record.id!)">
            <i class="bi bi-pencil"></i>
            <span class="btn-text">Edit</span>
          </button>
          <button type="button" class="btn-action btn-delete" (click)="onDelete(record.id!)">
            <i class="bi bi-trash"></i>
            <span class="btn-text">Delete</span>
          </button>
        </div>

      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="records.length === 0">
      <div class="empty-icon">
        <i class="bi bi-capsule"></i>
      </div>
      <h3>No Medication Records</h3>
      <p>No medication or treatment records have been added for this animal yet.</p>
      <button type="button" class="btn-primary" (click)="onAddRecord()">
        <i class="bi bi-plus-circle"></i>
        Add First Record
      </button>
    </div>

  </div>

</div>